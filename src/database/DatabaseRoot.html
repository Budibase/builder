<script>

import HeirarchyRow from "./HeirarchyRow.html";
import RecordView from "./RecordView.html";
import {heirarchy, selectedNode} from "../builderStore";
import getIcon from "../common/icon";

</script>

<div class="root">
    <div class="heirarchy">
        <div class="heirarchy-title-row">
            <div class="heirarchy-title">Records</div>
            <div class="heirarchy-add">
                {@html getIcon("plus")}
            </div>
        </div>
        {#each $heirarchy.children as record}
        <HeirarchyRow node={record} />
        {/each}

        <div class="heirarchy-title-row" style="margin-top: 20px">
            <div class="heirarchy-title">Indexes</div>
            <div class="heirarchy-add">
                {@html getIcon("plus")}
            </div>
        </div>
        {#each $heirarchy.indexes as index}
        <HeirarchyRow node={index} />
        {/each}
    </div>
    <div class="node-container">
        {#if !$selectedNode}
        <h1>nothing selected</h1>
        {:else}
        <RecordView record={$selectedNode} />
        {/if}
    </div>
</div>


<style>
.root {
    display: flex;
    height: 100%;
    position: relative;
}

.heirarchy {
    flex: 0 1 auto;
    width: 200px;
    background-color: var(--primary10);
}

.node-container {
    flex: 1 1 auto;
}

.heirarchy-title-row {
    padding: 15px 7px;
    /*background-color: var(--secondary75);
    color: var(--white);*/
    font-size: 11pt;
    display: flex;
    font-weight: bold;
}

.heirarchy-title {
    flex: auto 1 1;
}

.heirarchy-add {
    flex: auto 0 1;
    cursor: pointer;
    font-size: 13pt;
    bottom: 5px;
    position:relative;
}


</style>